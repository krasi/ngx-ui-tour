{"version":3,"file":"ngx-ui-tour-core.mjs","sources":["../../../projects/ngx-ui-tour-core/src/lib/utils/deep-merge.ts","../../../projects/ngx-ui-tour-core/src/lib/utils/is-covered.ts","../../../projects/ngx-ui-tour-core/src/lib/utils/is-in-viewport.ts","../../../projects/ngx-ui-tour-core/src/lib/utils/overflow-utils.ts","../../../projects/ngx-ui-tour-core/src/lib/utils/get-scrollable-parent.ts","../../../projects/ngx-ui-tour-core/src/lib/utils/scroll-utils.ts","../../../projects/ngx-ui-tour-core/src/lib/scrolling.service.ts","../../../projects/ngx-ui-tour-core/src/lib/tour-resize-observer.service.ts","../../../projects/ngx-ui-tour-core/src/lib/tour-backdrop.service.ts","../../../projects/ngx-ui-tour-core/src/lib/anchor-click.service.ts","../../../projects/ngx-ui-tour-core/src/lib/scroll-blocking.service.ts","../../../projects/ngx-ui-tour-core/src/lib/tour.service.ts","../../../projects/ngx-ui-tour-core/src/lib/tour-hotkey-listener.component.ts","../../../projects/ngx-ui-tour-core/src/lib/base-tour-proxy-anchor.ts","../../../projects/ngx-ui-tour-core/src/ngx-ui-tour-core.ts"],"sourcesContent":["type PlainObject = Record<string | number | symbol, unknown>;\n\nexport function deepMerge<T>(...objects: T[]): T {\n    return objects.reduce((acc: T, cur: T) => {\n\n        cur ??= {} as T;\n        const keys = Object.keys(cur) as (keyof T)[];\n\n        for (const key of keys) {\n            const accValue = acc[key] as PlainObject | unknown,\n                curValue = cur[key] as PlainObject | unknown;\n\n            if (isPlainObject(accValue) && isPlainObject(curValue)) {\n                acc[key] = deepMerge(accValue, curValue) as T[keyof T];\n            } else {\n                acc[key] = curValue as T[keyof T];\n            }\n        }\n\n        return acc;\n    }, {} as T);\n}\n\nfunction isPlainObject(value: unknown | PlainObject): value is PlainObject {\n    return value instanceof Object && value.constructor === Object;\n}\n","import {ElementSides} from './is-in-viewport';\n\nexport function isCovered(htmlElement: HTMLElement, sidesToCheck: ElementSides = ElementSides.All): boolean {\n    const rect = htmlElement.getBoundingClientRect(),\n        topEl = document.elementFromPoint(rect.left, rect.top),\n        bottomEl = document.elementFromPoint(rect.right, rect.bottom),\n        isTopCovered = !!topEl && topEl !== htmlElement && !areElementsRelated(topEl, htmlElement),\n        isBottomCovered = !!bottomEl && bottomEl !== htmlElement && !areElementsRelated(bottomEl, htmlElement);\n\n    if (sidesToCheck === ElementSides.Top) {\n        return isTopCovered;\n    }\n\n    if (sidesToCheck === ElementSides.Bottom) {\n        return isBottomCovered;\n    }\n\n    return isTopCovered || isBottomCovered;\n}\n\nfunction areElementsRelated(el1: Node, el2: Node): boolean {\n    return el1.contains(el2) || el2.contains(el1);\n}","export const enum ElementSides {\n    Top,\n    Bottom,\n    All\n}\n\nexport function isInViewport(htmlElement: HTMLElement, sidesToCheck: ElementSides = ElementSides.All): boolean {\n    const viewportWidth = window.innerWidth,\n        viewportHeight = window.innerHeight,\n        boundingRectangle = htmlElement.getBoundingClientRect(),\n        areCornersInViewport = boundingRectangle.left >= 0 && boundingRectangle.right <= viewportWidth,\n        isTopInViewport = boundingRectangle.top >= 0,\n        isBottomInViewport = boundingRectangle.bottom <= viewportHeight;\n\n    if (sidesToCheck === ElementSides.Top) {\n        return isTopInViewport && areCornersInViewport;\n    }\n    if (sidesToCheck === ElementSides.Bottom) {\n        return isBottomInViewport && areCornersInViewport;\n    }\n\n    return isTopInViewport && isBottomInViewport && areCornersInViewport;\n}\n","export class OverflowUtils {\n\n    static getVisibleSection(childRect: DOMRect, containerRect: DOMRect): DOMRect {\n        return OverflowUtils._isHeightOverflowing(childRect, containerRect) ?\n            OverflowUtils._getOverlap(childRect, containerRect) :\n            childRect;\n    }\n\n    static isHeightOverflowing(child: HTMLElement | DOMRect, container: HTMLElement | DOMRect): boolean {\n        return OverflowUtils._isHeightOverflowing(\n            child instanceof HTMLElement ? child.getBoundingClientRect() : child,\n            container instanceof HTMLElement ? container.getBoundingClientRect() : container,\n        );\n    }\n\n    private static _isHeightOverflowing(childRect: DOMRect, containerRect: DOMRect): boolean {\n        return containerRect.height < childRect.height;\n    }\n\n    private static _getOverlap(a: DOMRect, b: DOMRect): DOMRect {\n        const top = Math.max(a.top, b.top),\n            left = Math.max(a.left, b.left),\n            right = Math.min(a.right, b.right),\n            bottom = Math.min(a.bottom, b.bottom);\n        return new DOMRect(left, top, right - left, bottom - top);\n    }\n}\n\n","export function getScrollableParent(node: Node): HTMLElement | null {\n    if (!(node instanceof HTMLElement || node instanceof ShadowRoot)) {\n        return null;\n    }\n\n    const element = node instanceof ShadowRoot ? node.host as HTMLElement : node;\n\n    const style = getComputedStyle(element),\n        isScrollable = element.scrollHeight > element.clientHeight,\n        overflow = style.overflowY,\n        scrollableOverflow = ['scroll', 'auto'];\n\n    if (isScrollable && scrollableOverflow.includes(overflow)) {\n        return element;\n    }\n\n    return getScrollableParent(element.parentNode);\n}\n","import {getScrollableParent} from './get-scrollable-parent';\n\nexport class ScrollUtils {\n    \n    static getScrollContainer(\n        anchorEl: HTMLElement,\n        userScrollContainer: string | HTMLElement | undefined\n    ): HTMLElement | null {\n        if (typeof userScrollContainer === 'string') {\n            return document.documentElement.querySelector(userScrollContainer);\n        }\n        if (userScrollContainer instanceof HTMLElement) {\n            return userScrollContainer;\n        }\n\n        return getScrollableParent(anchorEl);\n    }\n    \n}\n","import {ElementSides, isCovered, isInViewport, OverflowUtils, ScrollUtils} from './utils';\nimport {debounceTime, firstValueFrom, fromEvent, map, of, timeout} from 'rxjs';\nimport {inject, Injectable, PLATFORM_ID} from '@angular/core';\nimport {DOCUMENT, isPlatformBrowser} from '@angular/common';\n\nexport interface ScrollOptions {\n    center: boolean;\n    smoothScroll: boolean;\n    scrollContainer?: string | HTMLElement;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ScrollingService {\n\n    private readonly platformId = inject(PLATFORM_ID);\n    private readonly isBrowser = isPlatformBrowser(this.platformId);\n    private readonly document = inject(DOCUMENT);\n    private readonly window = this.document.defaultView;\n    private scrollOptions: ScrollOptions;\n    private anchorEl: HTMLElement;\n\n    ensureVisible(anchorElement: HTMLElement, options: ScrollOptions): Promise<void> {\n        this.scrollOptions = options;\n        this.anchorEl = anchorElement;\n\n        const behavior: ScrollBehavior = options.smoothScroll && this.isBrowser ? 'smooth' : 'auto';\n\n        const userScrollContainer = this.scrollOptions.scrollContainer,\n            scrollContainer = ScrollUtils.getScrollContainer(anchorElement, userScrollContainer) ?? document.documentElement;\n\n        if (OverflowUtils.isHeightOverflowing(anchorElement, scrollContainer)) {\n            anchorElement.scrollIntoView({\n                block: 'start',\n                inline: 'start',\n                behavior\n            });\n        } else if (options.center && !('safari' in this.window)) {\n            anchorElement.scrollIntoView({\n                block: 'center',\n                inline: 'center',\n                behavior\n            });\n        } else if (!isInViewport(anchorElement, ElementSides.Bottom) || isCovered(anchorElement, ElementSides.Bottom)) {\n            anchorElement.scrollIntoView({\n                block: 'end',\n                inline: 'nearest',\n                behavior\n            });\n        } else if (!isInViewport(anchorElement, ElementSides.Top) || isCovered(anchorElement, ElementSides.Top)) {\n            anchorElement.scrollIntoView({\n                block: 'start',\n                inline: 'nearest',\n                behavior\n            });\n        } else {\n            return Promise.resolve();\n        }\n\n        return behavior === 'smooth' ? firstValueFrom(this.waitForScrollFinish$) : Promise.resolve();\n    }\n\n    private get waitForScrollFinish$() {\n        const userScrollContainer = this.scrollOptions.scrollContainer,\n            // Default here is \"document\" instead of \"document.documentElement\" on purpose\n            scrollContainer = ScrollUtils.getScrollContainer(this.anchorEl, userScrollContainer) ?? document;\n\n        return fromEvent(scrollContainer, 'scroll')\n            .pipe(\n                timeout({\n                    each: 75,\n                    with: () => of(undefined)\n                }),\n                debounceTime(50),\n                map(() => undefined)\n            );\n    }\n\n}\n","import {DOCUMENT, isPlatformBrowser} from '@angular/common';\nimport {inject, Injectable, PLATFORM_ID} from '@angular/core';\nimport {debounceTime, fromEvent, merge, Subject} from 'rxjs';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class TourResizeObserverService {\n\n    private readonly resizeElSubject = new Subject<void>();\n    private readonly platformId = inject(PLATFORM_ID);\n    private readonly isResizeObserverSupported = isPlatformBrowser(this.platformId) && !!ResizeObserver;\n    private resizeObserver?: ResizeObserver;\n    private readonly document = inject(DOCUMENT);\n    private readonly window = this.document.defaultView;\n\n    public readonly resize$ = merge(\n        this.resizeElSubject,\n        fromEvent(this.window, 'resize')\n    ).pipe(\n        debounceTime(10)\n    );\n\n    observeElement(target: Element) {\n        if (this.isResizeObserverSupported && !this.resizeObserver) {\n            this.resizeObserver = new ResizeObserver(\n                () => this.resizeElSubject.next()\n            );\n        }\n\n        this.resizeObserver?.observe(target);\n    }\n\n    unobserveElement(target: Element) {\n        this.resizeObserver?.unobserve(target);\n    }\n\n    disconnect() {\n        this.resizeObserver?.disconnect();\n        this.resizeObserver = undefined;\n    }\n\n}\n","import {ElementRef, inject, Injectable, RendererFactory2} from '@angular/core';\nimport {Subscription} from 'rxjs';\nimport {ScrollingService} from './scrolling.service';\nimport {TourResizeObserverService} from './tour-resize-observer.service';\nimport {IStepOption} from './tour.service';\nimport {DOCUMENT} from '@angular/common';\nimport {OverflowUtils, ScrollUtils} from './utils';\n\ninterface Rectangle {\n    width: number;\n    height: number;\n    top: number;\n    left: number;\n}\n\nexport interface BackdropConfig {\n    zIndex?: string;\n    backgroundColor?: string;\n    /**\n     * Parent container CSS selector or html element reference. Set to fix backdrop stacking issues. Defaults to body.\n     */\n    parentContainer?: string | HTMLElement;\n    /**\n     * Offset in pixels to add space between the backdrop and the anchor element.\n     */\n    offset?: number;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class TourBackdropService {\n\n    private backdropElements: HTMLElement[];\n    private targetHtmlElement: HTMLElement;\n    private step: IStepOption;\n    private resizeSubscription: Subscription;\n    private isSpotlightClosed = false;\n\n    private readonly rendererFactory = inject(RendererFactory2);\n    private readonly renderer = this.rendererFactory.createRenderer(null, null);\n    private readonly resizeObserverService = inject(TourResizeObserverService);\n    private readonly scrollingService = inject(ScrollingService);\n    private readonly document = inject(DOCUMENT);\n\n    public show(targetElement: ElementRef, step: IStepOption) {\n        if (this.targetHtmlElement) {\n            this.resizeObserverService.unobserveElement(this.targetHtmlElement);\n        }\n\n        this.targetHtmlElement = targetElement.nativeElement;\n        this.step = step;\n\n        this.resizeObserverService.observeElement(this.targetHtmlElement);\n\n        if (!this.backdropElements) {\n            this.backdropElements = this.createBackdropElements();\n            this.subscribeToResizeEvents();\n        }\n\n        this.isSpotlightClosed = false;\n        this.setBackdropPosition();\n    }\n\n    public closeSpotlight() {\n        if (!this.backdropElements) {\n            return;\n        }\n\n        const targetRect = this.targetHtmlElement.getBoundingClientRect(),\n            centerX = targetRect.left + (targetRect.width / 2),\n            centerY = targetRect.top + (targetRect.height / 2),\n            centerRect = {\n                top: centerY,\n                right: centerX,\n                bottom: centerY,\n                left: centerX,\n                width: 0,\n                height: 0\n            } as DOMRect;\n\n        this.isSpotlightClosed = true;\n        this.setBackdropPosition(centerRect);\n    }\n\n    private setBackdropPosition(rectangle: DOMRect = null) {\n        const docEl = this.document.documentElement,\n            scrollContainer = ScrollUtils.getScrollContainer(this.targetHtmlElement, this.step.scrollContainer) ?? docEl,\n            elementBoundingRect = rectangle ?? this.targetHtmlElement.getBoundingClientRect(),\n            scrollContainerRect = scrollContainer.getBoundingClientRect(),\n            visibleSection = OverflowUtils.getVisibleSection(elementBoundingRect, scrollContainerRect),\n            scrollHeight = docEl.scrollHeight,\n            scrollWidth = docEl.scrollWidth,\n            window = this.document.defaultView,\n            scrollX = window.scrollX,\n            scrollY = window.scrollY,\n            offset = this.isSpotlightClosed ? 0 : this.step.backdropConfig?.offset ?? 0,\n            leftRect: Rectangle = {\n                width: visibleSection.left + scrollX - offset,\n                height: scrollHeight,\n                top: 0,\n                left: 0\n            },\n            topRect: Rectangle = {\n                width: visibleSection.width + offset * 2,\n                height: visibleSection.top + scrollY - offset,\n                top: 0,\n                left: visibleSection.left + scrollX - offset\n            },\n            bottomRect: Rectangle = {\n                width: visibleSection.width + offset * 2,\n                height: scrollHeight - (visibleSection.bottom + scrollY) - offset,\n                top: visibleSection.bottom + scrollY + offset,\n                left: visibleSection.left + scrollX - offset\n            },\n            rightRect: Rectangle = {\n                width: scrollWidth - (visibleSection.right + scrollX) - offset,\n                height: scrollHeight,\n                top: 0,\n                left: visibleSection.right + scrollX + offset\n            },\n            rectangles: Rectangle[] = [leftRect, topRect, bottomRect, rightRect];\n\n        for (let i = 0; i < rectangles.length; i++) {\n            const styles = this.createBackdropStyles(rectangles[i]);\n            this.applyStyles(styles, this.backdropElements[i]);\n        }\n    }\n\n    private subscribeToResizeEvents() {\n        this.resizeSubscription = this.resizeObserverService.resize$\n            .subscribe(\n                () => {\n                    this.setBackdropPosition();\n                    if (!this.step.disableScrollToAnchor) {\n                        this.scrollingService.ensureVisible(this.targetHtmlElement, {\n                            center: this.step.centerAnchorOnScroll,\n                            smoothScroll: false\n                        });\n                    }\n                }\n            );\n    }\n\n    public close() {\n        if (this.backdropElements) {\n            this.resizeObserverService.unobserveElement(this.targetHtmlElement);\n            this.removeBackdropElement();\n            this.resizeSubscription.unsubscribe();\n        }\n    }\n\n    public disconnectResizeObserver() {\n        this.resizeObserverService.disconnect();\n    }\n\n    private removeBackdropElement() {\n        this.backdropElements.forEach(\n            backdropElement => this.renderer.removeChild(this.parentContainer, backdropElement)\n        );\n        this.backdropElements = undefined;\n    }\n\n    private applyStyles(styles: Partial<CSSStyleDeclaration>, element: HTMLElement) {\n        for (const name of Object.keys(styles)) {\n            this.renderer.setStyle(element, name, styles[name as keyof CSSStyleDeclaration]);\n        }\n    }\n\n    private createBackdropStyles(rectangle: Rectangle) {\n        const config = this.step.backdropConfig,\n            normalizedRect = {\n                ...rectangle,\n                width: Math.max(rectangle.width, 0),\n                height: Math.max(rectangle.height, 0)\n            };\n\n        return {\n            position: 'absolute',\n            width: `${normalizedRect.width}px`,\n            height: `${normalizedRect.height}px`,\n            top: `${normalizedRect.top}px`,\n            left: `${normalizedRect.left}px`,\n            backgroundColor: config?.backgroundColor ?? 'rgba(0, 0, 0, 0.7)',\n            zIndex: config?.zIndex ?? '101'\n        } as Partial<CSSStyleDeclaration>;\n    }\n\n    private createBackdropElement() {\n        const backdropElement = this.renderer.createElement('div');\n        this.renderer.addClass(backdropElement, 'ngx-ui-tour_backdrop');\n        this.renderer.appendChild(this.parentContainer, backdropElement);\n        return backdropElement;\n    }\n\n    private createBackdropElements() {\n        return Array\n            .from({length: 4})\n            .map(() => this.createBackdropElement());\n    }\n\n    private get parentContainer(): HTMLElement {\n        const parent = this.step.backdropConfig?.parentContainer;\n\n        if (parent instanceof HTMLElement) {\n            return parent;\n        }\n        if (typeof parent === 'string') {\n            const queryResult = this.document.documentElement.querySelector(parent) as HTMLElement;\n\n            return queryResult ?? this.document.body;\n        }\n\n        return this.document.body;\n    }\n\n}\n","import {inject, Injectable, RendererFactory2} from '@angular/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AnchorClickService {\n\n    private readonly rendererFactory = inject(RendererFactory2);\n    private readonly renderer = this.rendererFactory.createRenderer(null, null);\n\n    private unListenToAnchorClickFn: () => void;\n\n    public removeListener() {\n        if (this.unListenToAnchorClickFn) {\n            this.unListenToAnchorClickFn();\n            this.unListenToAnchorClickFn = undefined;\n        }\n    }\n\n    public addListener(anchorEl: HTMLElement, callback: () => void) {\n        this.unListenToAnchorClickFn = this.renderer.listen(anchorEl, 'click', callback);\n    }\n}","import {inject, Injectable, PLATFORM_ID, RendererFactory2} from '@angular/core';\nimport {isPlatformBrowser} from '@angular/common';\nimport {ScrollUtils} from './utils';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ScrollBlockingService {\n\n    private isEnabled = false;\n    private userScrollContainer: string | HTMLElement;\n\n    private readonly platformId = inject(PLATFORM_ID);\n    private readonly isBrowser = isPlatformBrowser(this.platformId);\n    private readonly rendererFactory = inject(RendererFactory2);\n    private readonly renderer = this.rendererFactory.createRenderer(null, null);\n\n    enable(scrollContainer: string | HTMLElement) {\n        if (!this.isBrowser || this.isEnabled) {\n            return;\n        }\n\n        this.userScrollContainer = scrollContainer;\n        this.toggleOverflow();\n        this.isEnabled = true;\n    }\n\n    disable() {\n        if (!this.isEnabled) {\n            return;\n        }\n\n        this.toggleOverflow();\n        this.isEnabled = false;\n    }\n\n    private toggleOverflow() {\n        // Don't try to automatically detect scroll container here since that breaks smooth scrolling\n        const scrollContainer = ScrollUtils.getScrollContainer(null, this.userScrollContainer) ?? document.documentElement;\n\n        if (this.isEnabled) {\n            this.renderer.removeStyle(scrollContainer, 'overflow');\n        } else {\n            this.renderer.setStyle(scrollContainer, 'overflow', 'hidden');\n        }\n    }\n\n}\n","import {inject, Injectable} from '@angular/core';\nimport type {UrlSegment} from '@angular/router';\nimport {IsActiveMatchOptions, NavigationStart, Router} from '@angular/router';\n\nimport {TourAnchorDirective} from './tour-anchor.directive';\nimport {delay, filter, first, map, merge as mergeStatic, Observable, of, Subject, takeUntil, timeout} from 'rxjs';\nimport {ScrollingService} from './scrolling.service';\nimport {BackdropConfig, TourBackdropService} from './tour-backdrop.service';\nimport {AnchorClickService} from './anchor-click.service';\nimport {ScrollBlockingService} from './scroll-blocking.service';\nimport {deepMerge} from './utils';\n\nexport interface StepDimensions {\n    width?: string;\n    minWidth?: string;\n    maxWidth?: string;\n}\n\nexport interface IStepOption {\n    stepId?: string;\n    anchorId?: string;\n    title?: string;\n    content?: string;\n    route?: string | UrlSegment[];\n    nextStep?: number | string;\n    prevStep?: number | string;\n    disableScrollToAnchor?: boolean;\n    centerAnchorOnScroll?: boolean;\n    smoothScroll?: boolean;\n    /**\n     * CSS selector or html element reference. Only set this config if you have enabled \"smoothScroll\" and tour step\n     * description pops-up before scrolling has finished or doesn't show up at all. This should only be the case when\n     * scroll container is part of shadow DOM.\n     */\n    scrollContainer?: string | HTMLElement;\n    prevBtnTitle?: string;\n    nextBtnTitle?: string;\n    endBtnTitle?: string;\n    enableBackdrop?: boolean;\n    backdropConfig?: BackdropConfig;\n    isAsync?: boolean;\n    asyncStepTimeout?: number;\n    isOptional?: boolean;\n    delayAfterNavigation?: number;\n    delayBeforeStepShow?: number;\n    nextOnAnchorClick?: boolean;\n    duplicateAnchorHandling?: 'error' | 'registerFirst' | 'registerLast';\n    disablePageScrolling?: boolean;\n    allowUserInitiatedNavigation?: boolean;\n    stepDimensions?: StepDimensions;\n    popoverClass?: string;\n    showProgress?: boolean;\n}\n\nexport enum TourState {\n    OFF,\n    ON,\n    PAUSED\n}\n\nexport enum Direction {\n    Forwards,\n    Backwards\n}\n\nexport interface StepChangeParams<T extends IStepOption = IStepOption> {\n    step: T;\n    direction: Direction;\n}\n\nconst DEFAULT_STEP_OPTIONS: IStepOption = {\n    disableScrollToAnchor: false,\n    prevBtnTitle: 'Prev',\n    nextBtnTitle: 'Next',\n    endBtnTitle: 'End',\n    enableBackdrop: false,\n    isAsync: false,\n    isOptional: false,\n    delayAfterNavigation: 100,\n    delayBeforeStepShow: 0,\n    nextOnAnchorClick: false,\n    duplicateAnchorHandling: 'error',\n    centerAnchorOnScroll: true,\n    disablePageScrolling: true,\n    smoothScroll: true,\n    allowUserInitiatedNavigation: false,\n    stepDimensions: {\n        minWidth: '250px',\n        maxWidth: '280px',\n        width: 'auto'\n    },\n    showProgress: true\n};\n\n// noinspection JSUnusedGlobalSymbols\n@Injectable({\n    providedIn: 'root'\n})\nexport class TourService<T extends IStepOption = IStepOption> {\n\n    public stepShow$: Subject<StepChangeParams<T>> = new Subject();\n    public stepHide$: Subject<StepChangeParams<T>> = new Subject();\n    public initialize$: Subject<T[]> = new Subject();\n    public start$: Subject<void> = new Subject();\n    public end$: Subject<void> = new Subject();\n    public pause$: Subject<void> = new Subject();\n    public resume$: Subject<void> = new Subject();\n    public anchorRegister$: Subject<string> = new Subject();\n    public anchorUnregister$: Subject<string> = new Subject();\n    public events$: Observable<{ name: string; value: unknown }> = mergeStatic(\n        this.stepShow$.pipe(map(value => ({name: 'stepShow', value}))),\n        this.stepHide$.pipe(map(value => ({name: 'stepHide', value}))),\n        this.initialize$.pipe(map(value => ({name: 'initialize', value}))),\n        this.start$.pipe(map(value => ({name: 'start', value}))),\n        this.end$.pipe(map(value => ({name: 'end', value}))),\n        this.pause$.pipe(map(value => ({name: 'pause', value}))),\n        this.resume$.pipe(map(value => ({name: 'resume', value}))),\n        this.anchorRegister$.pipe(\n            map(value => ({\n                name: 'anchorRegister',\n                value\n            }))\n        ),\n        this.anchorUnregister$.pipe(\n            map(value => ({\n                name: 'anchorUnregister',\n                value\n            }))\n        )\n    );\n\n    public steps: T[] = [];\n    public currentStep: T;\n\n    public anchors: { [anchorId: string]: TourAnchorDirective } = {};\n    private status: TourState = TourState.OFF;\n    private isHotKeysEnabled = true;\n    private direction = Direction.Forwards;\n    private waitingForScroll = false;\n    private navigationStarted = false;\n    private userDefaults: T;\n\n    private readonly router = inject(Router);\n    private readonly backdrop = inject(TourBackdropService);\n    private readonly anchorClickService = inject(AnchorClickService);\n    private readonly scrollBlockingService = inject(ScrollBlockingService);\n    private readonly scrollingService = inject(ScrollingService);\n\n    public initialize(steps: T[], stepDefaults?: T): void {\n        if (this.status === TourState.ON) {\n            console.warn('Can not re-initialize the UI tour while it\\'s still active');\n            return;\n        }\n\n        if (steps && steps.length > 0) {\n            this.status = TourState.OFF;\n            this.steps = steps.map(\n                step => deepMerge(\n                    DEFAULT_STEP_OPTIONS as T,\n                    this.userDefaults,\n                    stepDefaults,\n                    step\n                )\n            );\n            this.validateSteps();\n            this.initialize$.next(this.steps);\n            this.subscribeToNavigationStartEvent();\n        }\n    }\n\n    public setDefaults(defaultOptions: T): void {\n        this.userDefaults = defaultOptions;\n    }\n\n    public getDefaults(): T {\n        return this.userDefaults;\n    }\n\n    private validateSteps() {\n        for (const step of this.steps) {\n            if (step.isAsync && step.isOptional && !step.asyncStepTimeout) {\n                throw new Error(`Tour step with anchor id \"${step.anchorId}\" can only be both \"async\" and ` +\n                    `\"optional\" when \"asyncStepTimeout\" is specified!`);\n            }\n        }\n    }\n\n    private subscribeToNavigationStartEvent()\n    {\n        this.router.events\n            .pipe(\n                filter((event): event is NavigationStart => event instanceof NavigationStart),\n                takeUntil(this.end$)\n            )\n            .subscribe(\n                (event) => {\n                    if (!this.currentStep) {\n                        return;\n                    }\n\n                    const browserBackBtnPressed = event.navigationTrigger === 'popstate',\n                      userNavigationAllowed = this.currentStep.allowUserInitiatedNavigation;\n\n                    if (!this.navigationStarted && (browserBackBtnPressed || !userNavigationAllowed)) {\n                        this.end();\n                    }\n                }\n            );\n    }\n\n    public disableHotkeys(): void {\n        this.isHotKeysEnabled = false;\n    }\n\n    public enableHotkeys(): void {\n        this.isHotKeysEnabled = true;\n    }\n\n    public start(): void {\n        if (this.status === TourState.ON) {\n            console.warn('tourService.start() called while the tour is already running.');\n            return;\n        }\n        this.startAt(0);\n    }\n\n    public startAt(stepId: number | string): void {\n        this.status = TourState.ON;\n        this.goToStep(this.loadStep(stepId));\n        this.start$.next();\n    }\n\n    public end(): void {\n        if (this.waitingForScroll) {\n            return;\n        }\n\n        if (this.status === TourState.OFF) {\n            return;\n        }\n        this.status = TourState.OFF;\n        this.disableTour();\n        this.currentStep = undefined;\n        this.direction = Direction.Forwards;\n        this.end$.next();\n    }\n\n    public pause(): void {\n        this.status = TourState.PAUSED;\n        this.disableTour();\n        this.pause$.next();\n    }\n\n    private disableTour() {\n        this.hideStep(this.currentStep);\n        this.anchorClickService.removeListener();\n        this.backdrop.close();\n        this.backdrop.disconnectResizeObserver();\n        this.scrollBlockingService.disable();\n    }\n\n    public resume(): void {\n        this.status = TourState.ON;\n        this.showStep(this.currentStep);\n        this.resume$.next();\n    }\n\n    public toggle(pause?: boolean): void {\n        if (pause) {\n            if (this.currentStep) {\n                this.pause();\n            } else {\n                this.resume();\n            }\n        } else {\n            if (this.currentStep) {\n                this.end();\n            } else {\n                this.start();\n            }\n        }\n    }\n\n    public next(): void {\n        if (this.waitingForScroll) {\n            return;\n        }\n\n        this.direction = Direction.Forwards;\n        if (this.hasNext(this.currentStep)) {\n            this.goToStep(\n                this.loadStep(\n                    this.currentStep.nextStep ?? this.getStepIndex(this.currentStep) + 1\n                )\n            );\n        }\n    }\n\n    private getStepIndex(step: T): number {\n        const index = this.steps.indexOf(step);\n\n        return index < 0 ? 0 : index;\n    }\n\n    public hasNext(step: T): boolean {\n        if (!step) {\n            console.warn('Can\\'t get next step. No currentStep.');\n            return false;\n        }\n        return (\n            step.nextStep !== undefined ||\n            (this.getStepIndex(step) < this.steps.length - 1 && !this.isNextOptionalAnchorMissing(step))\n        );\n    }\n\n    private isNextOptionalAnchorMissing(step: T): boolean {\n        const stepIndex = this.getStepIndex(step);\n\n        for (let i = stepIndex + 1; i < this.steps.length; i++) {\n            const nextStep = this.steps[i];\n\n            if (!nextStep.isOptional || this.anchors[nextStep.anchorId])\n                return false;\n        }\n\n        return true;\n    }\n\n    public prev(): void {\n        if (this.waitingForScroll) {\n            return;\n        }\n\n        this.direction = Direction.Backwards;\n        if (this.hasPrev(this.currentStep)) {\n            this.goToStep(\n                this.loadStep(\n                    this.currentStep.prevStep ?? this.getStepIndex(this.currentStep) - 1\n                )\n            );\n        }\n    }\n\n    public hasPrev(step: T): boolean {\n        if (!step) {\n            console.warn('Can\\'t get previous step. No currentStep.');\n            return false;\n        }\n        return step.prevStep !== undefined ||\n            (this.getStepIndex(step) > 0 && !this.isPrevOptionalAnchorMising(step));\n    }\n\n    private isPrevOptionalAnchorMising(step: T): boolean {\n        const stepIndex = this.getStepIndex(step);\n\n        for (let i = stepIndex - 1; i > -1; i--) {\n            const prevStep = this.steps[i];\n\n            if (!prevStep.isOptional || this.anchors[prevStep.anchorId])\n                return false;\n        }\n\n        return true;\n    }\n\n    public goto(stepId: number | string): void {\n        this.goToStep(this.loadStep(stepId));\n    }\n\n    public register(anchorId: string, anchor: TourAnchorDirective): void {\n        if (!anchorId) {\n            return;\n        }\n\n        if (this.anchors[anchorId]) {\n            const step = this.findStepByAnchorId(anchorId),\n                duplicateAnchorHandling = step?.duplicateAnchorHandling ??\n                    this.userDefaults?.duplicateAnchorHandling ?? 'error';\n\n            switch (duplicateAnchorHandling) {\n                case 'error':\n                    throw new Error(`Tour anchor with id \"${anchorId}\" already registered!`);\n                case 'registerFirst':\n                    return;\n            }\n        }\n\n        this.anchors[anchorId] = anchor;\n        this.anchorRegister$.next(anchorId);\n    }\n\n    private findStepByAnchorId(anchorId: string): T {\n        return this.steps.find(step => step.anchorId === anchorId);\n    }\n\n    public unregister(anchorId: string): void {\n        if (!anchorId) {\n            return;\n        }\n        delete this.anchors[anchorId];\n        this.anchorUnregister$.next(anchorId);\n    }\n\n    public getStatus(): TourState {\n        return this.status;\n    }\n\n    public isHotkeysEnabled(): boolean {\n        return this.isHotKeysEnabled;\n    }\n\n    private goToStep(step: T): void {\n        if (!step) {\n            console.warn('Can\\'t go to non-existent step');\n            this.end();\n            return;\n        }\n        if (this.currentStep) {\n            this.backdrop.closeSpotlight();\n            this.hideStep(this.currentStep);\n        }\n\n        this.anchorClickService.removeListener();\n\n        if (step.route !== undefined && step.route !== null) {\n            this.navigateToRouteAndSetStep(step);\n        } else {\n            this.setCurrentStepAsync(step);\n        }\n    }\n\n    private listenToOnAnchorClick(step: T) {\n        if (step.nextOnAnchorClick) {\n            const anchorEl = this.anchors[step.anchorId].element.nativeElement;\n            this.anchorClickService.addListener(anchorEl, () => this.next());\n        }\n    }\n\n    private async navigateToRouteAndSetStep(step: T) {\n        const url = typeof step.route === 'string' ? step.route : this.router.createUrlTree(step.route),\n            matchOptions: IsActiveMatchOptions = {\n                paths: 'exact',\n                matrixParams: 'exact',\n                queryParams: 'subset',\n                fragment: 'exact'\n            };\n\n        const isActive = this.router.isActive(url, matchOptions);\n\n        if (isActive) {\n            this.setCurrentStepAsync(step);\n            return;\n        }\n\n        this.navigationStarted = true;\n        const navigated = await this.router.navigateByUrl(url);\n        this.navigationStarted = false;\n\n        if (!navigated) {\n            console.warn('Navigation to route failed: ', step.route);\n            this.end();\n        } else {\n            this.setCurrentStepAsync(step, step.delayAfterNavigation);\n        }\n    }\n\n    private loadStep(stepId: number | string): T {\n        if (typeof stepId === 'number') {\n            return this.steps[stepId];\n        } else {\n            return this.steps.find(step => step.stepId === stepId);\n        }\n    }\n\n    private setCurrentStep(step: T): void {\n        this.currentStep = step;\n        this.showStep(this.currentStep);\n    }\n\n    private setCurrentStepAsync(step: T, delay = 0): void {\n        delay = delay || step.delayBeforeStepShow;\n\n        setTimeout(() => this.setCurrentStep(step), delay);\n    }\n\n    protected async showStep(step: T, skipAsync = false): Promise<void> {\n        const anchor = this.anchors[step && step.anchorId];\n\n        if (!anchor) {\n            if (step.isAsync && !skipAsync) {\n                let anchorRegistered$ = this.anchorRegister$\n                    .pipe(\n                        filter(anchorId => anchorId === step.anchorId),\n                        first(),\n                        delay(0)\n                    );\n\n                if (step.asyncStepTimeout) {\n                    anchorRegistered$ = anchorRegistered$\n                        .pipe(\n                            timeout({\n                                each: step.asyncStepTimeout,\n                                with: () => of(null)\n                            })\n                        );\n                }\n\n                anchorRegistered$\n                    .subscribe(\n                        () => this.showStep(step, true)\n                    );\n                return;\n            }\n            if (step.isOptional) {\n                this.direction === Direction.Forwards ? this.next() : this.prev();\n                return;\n            }\n\n            console.warn(`Can't attach to unregistered anchor with id \"${step.anchorId}\"`);\n            this.end();\n            return;\n        }\n        this.listenToOnAnchorClick(step);\n        this.waitingForScroll = true;\n        await this.scrollToAnchor(step);\n        this.waitingForScroll = false;\n        anchor.showTourStep(step);\n        this.toggleBackdrop(step);\n        this.togglePageScrolling(step);\n        this.stepShow$.next({\n            step,\n            direction: this.direction\n        });\n    }\n\n    private hideStep(step: T): void {\n        const anchor = this.anchors[step && step.anchorId];\n        if (!anchor) {\n            return;\n        }\n        anchor.hideTourStep();\n        this.stepHide$.next({\n            step,\n            direction: this.direction\n        });\n    }\n\n    private scrollToAnchor(step: T): Promise<void> {\n        if (step.disableScrollToAnchor) {\n            return Promise.resolve();\n        }\n\n        const anchor = this.anchors[step?.anchorId],\n            htmlElement = anchor.element.nativeElement;\n\n        return this.scrollingService.ensureVisible(htmlElement, {\n            center: step.centerAnchorOnScroll,\n            smoothScroll: step.smoothScroll,\n            scrollContainer: step.scrollContainer\n        });\n    }\n\n    private toggleBackdrop(step: T) {\n        const anchor = this.anchors[step?.anchorId];\n\n        if (step.enableBackdrop) {\n            this.backdrop.show(anchor.element, step);\n        } else {\n            this.backdrop.close();\n        }\n    }\n\n    private togglePageScrolling(step: T) {\n        if (step.disablePageScrolling) {\n            this.scrollBlockingService.enable(step.scrollContainer);\n        } else {\n            this.scrollBlockingService.disable();\n        }\n    }\n\n}\n","import {Component, HostListener} from '@angular/core';\nimport {TourService, TourState} from './tour.service';\n\n\n@Component({\n    selector: 'tour-hotkey-listener',\n    template: `<ng-content></ng-content>`,\n    standalone: true\n})\nexport class TourHotkeyListenerComponent {\n\n    constructor(\n        public readonly tourService: TourService\n    ) {}\n\n    /**\n     * Configures hot keys for controlling the tour with the keyboard\n     */\n    @HostListener('window:keydown.Escape')\n    public onEscapeKey(): void {\n        if (\n            this.tourService.getStatus() === TourState.ON &&\n            this.tourService.isHotkeysEnabled()\n        ) {\n            this.tourService.end();\n        }\n    }\n\n    @HostListener('window:keydown.ArrowRight')\n    public onArrowRightKey(): void {\n        const step = this.tourService.currentStep;\n\n        if (\n            this.tourService.getStatus() === TourState.ON &&\n            this.tourService.hasNext(this.tourService.currentStep) &&\n            this.tourService.isHotkeysEnabled() &&\n            !step?.nextOnAnchorClick\n        ) {\n            this.tourService.next();\n        }\n    }\n\n    @HostListener('window:keydown.ArrowLeft')\n    public onArrowLeftKey(): void {\n        if (\n            this.tourService.getStatus() === TourState.ON &&\n            this.tourService.hasPrev(this.tourService.currentStep) &&\n            this.tourService.isHotkeysEnabled()\n        ) {\n            this.tourService.prev();\n        }\n    }\n}\n","import {afterNextRender, AfterRenderPhase, Directive, ElementRef, inject} from '@angular/core';\nimport {TourAnchorDirective} from './tour-anchor.directive';\nimport {DOCUMENT} from '@angular/common';\n\n@Directive()\nexport abstract class BaseTourProxyAnchor {\n\n    protected abstract readonly anchorDirective: TourAnchorDirective;\n    private readonly document = inject(DOCUMENT);\n\n    public abstract anchorEl: string | HTMLElement;\n\n    constructor() {\n        afterNextRender(\n            () => this.setAnchorElement(), {\n                phase: AfterRenderPhase.Read\n            }\n        );\n    }\n\n    private setAnchorElement(): void {\n        if (this.anchorEl instanceof HTMLElement) {\n            this.anchorDirective.element = new ElementRef<HTMLElement>(this.anchorEl);\n            return;\n        }\n        const htmlElement = this.document.querySelector<HTMLElement>(this.anchorEl);\n\n        if (!htmlElement) {\n            throw new Error(`Element with \"${this.anchorEl}\" CSS selector could not be found!`);\n        }\n\n        this.anchorDirective.element = new ElementRef<HTMLElement>(htmlElement);\n    }\n\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["mergeStatic","i1.TourService"],"mappings":"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"}